<!doctype html>
<html lang=fa dir=rtl>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Ø­Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø¯Ùˆ ÙØ§Ø²ÛŒ Revised Simplex</title>
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css rel=stylesheet>
<script src=https://cdn.jsdelivr.net/npm/mathjs@11.8.0/lib/browser/math.min.js></script>
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}}</script>
<style>body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0,#764ba2 100%);min-height:100vh;padding:20px}.container{background:#fff;border-radius:15px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,.2);max-width:1400px}h1{color:#764ba2;font-weight:700;text-align:center;margin-bottom:30px}.nav-tabs{border-bottom:2px solid #764ba2;margin-bottom:25px}.nav-tabs .nav-link{color:#764ba2;font-weight:600;border:none;border-bottom:3px solid transparent}.nav-tabs .nav-link.active{color:#764ba2;background:0 0;border-bottom:3px solid #764ba2}.input-section{background:#f8f9fa;padding:20px;border-radius:10px;margin-bottom:20px}.matrix-input{display:grid;gap:5px;margin:10px 0;overflow-x:auto}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}.matrix-input input{width:70px;text-align:center;padding:5px;border:1px solid #ddd;border-radius:4px}.btn-solve{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;font-weight:700;padding:12px 40px;border:none;border-radius:8px;font-size:1.1rem;margin:20px auto;display:block}.btn-solve:hover{transform:scale(1.05);box-shadow:0 5px 20px rgba(118,75,162,.4)}.loading{display:none;text-align:center;padding:30px;background:#fff;border-radius:10px;margin:20px 0}.loading.active{display:block}.spinner{width:50px;height:50px;border:5px solid #e9ecef;border-top-color:#764ba2;border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 15px}@keyframes spin{to{transform:rotate(360deg)}}.step-box{background:#fff;border:2px solid #764ba2;border-radius:10px;padding:20px;margin:20px 0;box-shadow:0 4px 15px rgba(0,0,0,.1)}.step-title{font-size:1.3rem;font-weight:700;color:#764ba2;margin-bottom:15px;display:flex;align-items:center;gap:10px}.step-number{background:#764ba2;color:#fff;width:35px;height:35px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:1.1rem}.phase-header{background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;padding:20px;border-radius:10px;text-align:center;font-size:1.5rem;font-weight:700;margin:30px 0 20px 0;box-shadow:0 5px 20px rgba(118,75,162,.3)}.math-block{background:#f8f9fa;border-right:4px solid #764ba2;padding:15px;margin:10px 0;border-radius:5px;direction:ltr;text-align:center;overflow-x:auto}.math-block.success{background:#d4edda;border-color:#28a745}.math-block.warning{background:#fff3cd;border-color:#ffc107}.math-block.highlight{background:#e7f3ff;border-color:#2196f3}.result-box{background:linear-gradient(135deg,#56ab2f 0,#a8e063 100%);color:#fff;padding:30px;border-radius:15px;text-align:center;margin:30px 0;box-shadow:0 8px 25px rgba(0,0,0,.15)}.result-box h3{font-size:2rem;margin-bottom:20px}.result-box.infeasible-box{background:linear-gradient(135deg,#eb3349 0,#f45c43 100%)}.ratio-table{width:100%;margin:15px 0;border-collapse:collapse}.ratio-table td,.ratio-table th{border:1px solid #ddd;padding:10px;text-align:center}.ratio-table th{background:#764ba2;color:#fff;font-weight:700}.ratio-table tr.selected{background:#d4edda;font-weight:700}.ratio-table tr.invalid{background:#f8d7da;color:#999}.explanation-text{color:#555;font-size:.95rem;line-height:1.6;margin:10px 0}.leaving-var{color:#e74c3c;font-weight:700}.entering-var{color:#27ae60;font-weight:700}.basis-selector{margin:15px 0}.basis-selector label{display:inline-block;margin:5px 10px;padding:8px 15px;background:#e9ecef;border-radius:5px;cursor:pointer}.basis-selector input[type=checkbox]:checked+span{background:#28a745;color:#fff;padding:8px 15px;border-radius:5px}.example-btn{background:linear-gradient(135deg,#ed8936,#dd6b20);border:none;border-radius:8px;padding:8px 20px;font-weight:600;color:#fff;margin:5px;cursor:pointer;font-size:.9rem}.example-btn:hover{transform:scale(1.05);box-shadow:0 3px 10px rgba(237,137,54,.4)}.examples-section{background:#fff3e0;padding:15px;border-radius:10px;margin:15px 0;border:2px dashed #ff9800}</style>
</head>
<body>
<div class=container>
<h1>ğŸ¯ Ø­Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø¯Ùˆ ÙØ§Ø²ÛŒ Revised Simplex</h1>
<div style="text-align:center;margin:15px 0">
<a href=https://or344.github.io/symplex/ style="display:inline-block;background:linear-gradient(135deg,#667eea 0,#764ba2 100%);color:#fff;padding:12px 25px;border-radius:8px;text-decoration:none;font-weight:600">
ğŸ“Š Ø­Ù„ Ø¨Ù‡ Ø±ÙˆØ´ M Ø¨Ø²Ø±Ú¯
</a>
</div>
<ul class="nav nav-tabs" role=tablist>
<li class=nav-item role=presentation>
<button class="nav-link active" id=auto-tab data-bs-toggle=tab data-bs-target=#auto-mode type=button>Ø­Ø§Ù„Øª Ø®ÙˆØ¯Ú©Ø§Ø± (Ø¯Ùˆ ÙØ§Ø²)</button>
</li>
<li class=nav-item role=presentation>
<button class=nav-link id=manual-tab data-bs-toggle=tab data-bs-target=#manual-mode type=button>Ø­Ø§Ù„Øª Ø¯Ø³ØªÛŒ (Ø´Ø±ÙˆØ¹ Ø§Ø² ÙØ§Ø² Û²)</button>
</li>
</ul>
<div class=tab-content>
<div class="tab-pane fade show active" id=auto-mode>
<div class=input-section>
<h4>ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø³Ø¦Ù„Ù‡</h4>
<div class=row>
<div class=col-md-6>
<label>ØªØ¹Ø¯Ø§Ø¯ Ù…ØªØºÛŒØ±Ù‡Ø§:</label>
<input type=number id=auto-vars class=form-control value=2 min=1>
</div>
<div class=col-md-6>
<label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:</label>
<input type=number id=auto-constraints class=form-control value=2 min=1>
</div>
</div>
<button class="btn btn-primary mt-3" onclick=generateAutoInputs()>Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ±ÙˆØ¯ÛŒ</button>
<div class="examples-section mt-3">
<h6 style=color:#f57c00;font-weight:700;margin-bottom:10px>ğŸ’¡ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡:</h6>
<button class=example-btn onclick=loadAutoExample1()>Ù…Ø«Ø§Ù„ Û±: Ù…Ø­Ø¯ÙˆØ¯ÛŒØª &ge; (Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙØ§Ø² Û±)</button>
<button class=example-btn onclick=loadAutoExample2()>Ù…Ø«Ø§Ù„ Û²: Ù…Ø­Ø¯ÙˆØ¯ÛŒØª &le; (Ù…Ø³ØªÙ‚ÛŒÙ… ÙØ§Ø² Û²)</button>
<button class=example-btn onclick=loadAutoExample3()>Ù…Ø«Ø§Ù„ Û³: ØªØ±Ú©ÛŒØ¨ÛŒ (ÙØ§Ø² Û± Ùˆ Û²)</button>
</div>
<div id=auto-inputs></div>
</div>
<button class=btn-solve onclick=solveAuto()>Ø­Ù„ Ø¨Ø§ Ø±ÙˆØ´ Ø¯Ùˆ ÙØ§Ø²ÛŒ</button>
<div class=loading id=auto-loading>
<div class=spinner></div>
<p>Ø¯Ø± Ø­Ø§Ù„ Ø­Ù„ Ù…Ø³Ø¦Ù„Ù‡...</p>
</div>
<div id=auto-output></div>
</div>
<div class="tab-pane fade" id=manual-mode>
<div class=input-section>
<h4>ÙˆØ±ÙˆØ¯ÛŒ Ù…Ø³Ø¦Ù„Ù‡ (ÙØ§Ø² Û² Ù…Ø³ØªÙ‚ÛŒÙ…)</h4>
<div class=row>
<div class=col-md-6>
<label>ØªØ¹Ø¯Ø§Ø¯ Ù…ØªØºÛŒØ±Ù‡Ø§ (Ø´Ø§Ù…Ù„ slack/surplus):</label>
<input type=number id=manual-vars class=form-control value=4 min=1 onchange=generateManualInputs()>
</div>
<div class=col-md-6>
<label>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§:</label>
<input type=number id=manual-constraints class=form-control value=2 min=1 onchange=generateManualInputs()>
</div>
</div>
<button class="btn btn-primary mt-3" onclick=generateManualInputs()>Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„ ÙˆØ±ÙˆØ¯ÛŒ</button>
<div class="examples-section mt-3">
<h6 style=color:#f57c00;font-weight:700;margin-bottom:10px>ğŸ’¡ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡:</h6>
<button class=example-btn onclick=loadManualExample1()>Ù…Ø«Ø§Ù„ Û±: Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ Ø³Ø§Ø¯Ù‡</button>
<button class=example-btn onclick=loadManualExample2()>Ù…Ø«Ø§Ù„ Û²: Ù¾Ø§ÛŒÙ‡ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ±</button>
</div>
<div id=manual-inputs></div>
</div>
<button class=btn-solve onclick=solveManual()>Ø´Ø±ÙˆØ¹ ÙØ§Ø² Û²</button>
<div class=loading id=manual-loading>
<div class=spinner></div>
<p>Ø¯Ø± Ø­Ø§Ù„ Ø­Ù„ Ù…Ø³Ø¦Ù„Ù‡...</p>
</div>
<div id=manual-output></div>
</div>
</div>
</div>
<footer style="margin-top:60px;padding:30px;text-align:center;background-color:#f8f9fa;border-top:1px solid #dee2e6;font-size:.95rem;color:#666">
<p style=margin:0><strong>Ø­Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ø±ÙˆØ´ Two-Phase Revised Simplex</strong></p>
<p style="margin:8px 0 0 0">Ø¯Ø±Ø³ ØªØ­Ù‚ÛŒÙ‚ Ø¯Ø± Ø¹Ù…Ù„ÛŒØ§Øª Û± - Ø§Ø³ØªØ§Ø¯ Ø®Ø³Ø±ÙˆÛŒ<strong></strong></p>
</footer>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js></script>
<script>const EPSILON=1e-9;function persianToEnglish(e){const t=["Û°","Û±","Û²","Û³","Û´","Ûµ","Û¶","Û·","Û¸","Û¹"],a=["Ù ","Ù¡","Ù¢","Ù£","Ù¤","Ù¥","Ù¦","Ù§","Ù¨","Ù©"],n=["0","1","2","3","4","5","6","7","8","9"];let l=e.toString();for(let e=0;e<10;e++)l=l.replace(new RegExp(t[e],"g"),n[e]),l=l.replace(new RegExp(a[e],"g"),n[e]);return l}function getNumValue(e){const t=document.getElementById(e).value;return parseFloat(persianToEnglish(t))||0}function formatNum(e,t=4){if(Array.isArray(e)&&(e=e[0]),"number"!=typeof e&&(e=parseFloat(e)||0),Math.abs(e)<1e-9)return"0";if(Math.abs(e-Math.round(e))<1e-9)return Math.round(e).toString();try{const t=math.fraction(e),a=t.n,n=t.d;return 1===n?a.toString():a<0?`-\\frac{${Math.abs(a)}}{${n}}`:`\\frac{${a}}{${n}}`}catch(a){return e.toFixed(t).replace(/\.?0+$/,"")}}function vec2latex(e){return"\\begin{bmatrix}"+e.map((e=>formatNum(e))).join("\\\\")+"\\end{bmatrix}"}function mat2latex(e){return"\\begin{bmatrix}"+e.map((e=>e.map((e=>formatNum(e))).join("&"))).join("\\\\")+"\\end{bmatrix}"}function getCol(e,t){return e.map((e=>e[t]))}function generateAutoInputs(){const e=parseInt(document.getElementById("auto-vars").value),t=parseInt(document.getElementById("auto-constraints").value);let a='<h5 class="mt-4">Ù†ÙˆØ¹ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ:</h5>';a+='<div class="mb-3">',a+='<label class="me-3"><input type="radio" name="auto-objtype" value="max" checked> Ù…Ø§Ú©Ø²ÛŒÙ…Ù…</label>',a+='<label><input type="radio" name="auto-objtype" value="min"> Ù…ÛŒÙ†ÛŒÙ…Ù…</label>',a+="</div>",a+='<h5 class="mt-3">Ø¶Ø±Ø§ÛŒØ¨ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù (c):</h5>',a+='<div class="matrix-input" style="grid-template-columns: repeat('+e+', 70px);direction:ltr;">';for(let t=0;t<e;t++)a+='<div style="text-align:center;">',a+=`<label style="font-size:0.9rem;color:#764ba2;font-weight:600;display:block;margin-bottom:5px;">x<sub>${t+1}</sub></label>`,a+=`<input type="text" id="auto-c${t}" value="0" class="num-input" style="text-align:center;">`,a+="</div>";a+="</div>",a+='<h5 class="mt-3">Ù…Ø§ØªØ±ÛŒØ³ Ø¶Ø±Ø§ÛŒØ¨ (A) Ùˆ Ø¨Ø±Ø¯Ø§Ø± Ø±Ø§Ø³Øª (b):</h5>',a+='<div class="table-responsive" style="direction:ltr;">',a+='<table class="table table-bordered"><thead><tr>';for(let t=0;t<e;t++)a+=`<th>x${t+1}</th>`;a+="<th>Ù†ÙˆØ¹</th><th>b</th></tr></thead><tbody>";for(let n=0;n<t;n++){a+="<tr>";for(let t=0;t<e;t++)a+=`<td><input type="text" id="auto-a${n}_${t}" value="0" class="num-input" style="width:60px;text-align:center;"></td>`;a+=`<td><select id="auto-type${n}" class="form-select" style="width:80px;">\n                    <option value="<=">&le;</option>\n                    <option value=">=">&ge;</option>\n                    <option value="=">=</option>\n                </select></td>`,a+=`<td><input type="text" id="auto-b${n}" value="0" class="num-input" style="width:60px;text-align:center;"></td>`,a+="</tr>"}a+="</tbody></table></div>",document.getElementById("auto-inputs").innerHTML=a,document.querySelectorAll(".num-input").forEach((e=>{e.addEventListener("input",(function(e){const t=this.selectionStart,a=this.value.length;this.value=persianToEnglish(this.value);const n=this.value.length;this.selectionStart=this.selectionEnd=t+(n-a)}))})),document.querySelectorAll(".num-input").forEach((e=>{e.addEventListener("input",(function(e){const t=this.selectionStart,a=this.value.length;this.value=persianToEnglish(this.value);const n=this.value.length;this.selectionStart=this.selectionEnd=t+(n-a)}))}))}function solveAuto(){document.getElementById("auto-loading").classList.add("active"),document.getElementById("auto-output").innerHTML="",setTimeout((()=>{try{const e=parseInt(document.getElementById("auto-vars").value),t=parseInt(document.getElementById("auto-constraints").value),a=document.querySelector('input[name="auto-objtype"]:checked').value,n=[];for(let t=0;t<e;t++)n.push(getNumValue(`auto-c${t}`));const l=[],o=[],s=[];for(let a=0;a<t;a++){const t=[];for(let n=0;n<e;n++)t.push(getNumValue(`auto-a${a}_${n}`));l.push(t),o.push(getNumValue(`auto-b${a}`)),s.push(document.getElementById(`auto-type${a}`).value)}const d=twoPhaseRevised(l,o,n,s,a);document.getElementById("auto-output").innerHTML=d,MathJax.typesetPromise()}catch(e){document.getElementById("auto-output").innerHTML=`<div class="alert alert-danger">Ø®Ø·Ø§: ${e.message}<br><pre>${e.stack}</pre></div>`}document.getElementById("auto-loading").classList.remove("active")}),100)}function generateManualInputs(){const e=parseInt(document.getElementById("manual-vars").value),t=parseInt(document.getElementById("manual-constraints").value);let a='<h5 class="mt-4">Ù†ÙˆØ¹ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ:</h5>';a+='<div class="mb-3">',a+='<label class="me-3"><input type="radio" name="manual-objtype" value="max" checked> Ù…Ø§Ú©Ø²ÛŒÙ…Ù…</label>',a+='<label><input type="radio" name="manual-objtype" value="min"> Ù…ÛŒÙ†ÛŒÙ…Ù…</label>',a+="</div>",a+='<h5 class="mt-3">Ø¶Ø±Ø§ÛŒØ¨ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù (c):</h5>',a+='<div style="background:linear-gradient(135deg, #f093fb 0%, #f5576c 100%);border-radius:10px;padding:15px;margin:10px 0;color:white;box-shadow:0 3px 10px rgba(240,147,251,0.3);">',a+='<div style="display:flex;align-items:center;gap:8px;margin-bottom:10px;">',a+='<span style="font-size:1.2rem;">ğŸ¯</span>',a+='<strong style="font-size:1rem;">Ù†Ø­ÙˆÙ‡ ÙˆØ±ÙˆØ¯ Ø¶Ø±Ø§ÛŒØ¨ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù</strong>',a+="</div>",a+='<div style="background:rgba(255,255,255,0.95);border-radius:6px;padding:12px;color:#333;font-size:0.9rem;line-height:1.7;">',a+='<p style="margin:0 0 8px 0;"><strong style="color:#d81b60;">âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> ØªØ¹Ø¯Ø§Ø¯ Ù…ØªØºÛŒØ±Ù‡Ø§ Ø´Ø§Ù…Ù„ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ <strong>Ùˆ</strong> Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ (slack/surplus) Ø§Ø³Øª.</p>',a+='<p style="margin:0 0 10px 0;background:#e3f2fd;padding:8px;border-right:3px solid #2196f3;border-radius:4px;">',a+='<strong style="color:#1565c0;">ğŸ“ ÙØ±Ù…ÙˆÙ„ Ú©Ù„ÛŒ:</strong><br>',a+='<code style="background:#fff;padding:3px 6px;border-radius:3px;font-size:0.85rem;">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ Ù…ØªØºÛŒØ±Ù‡Ø§ = Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ + Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ slack + Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ surplus</code>',a+="</p>",a+='<div style="background:#fff3e0;padding:10px;border-radius:5px;margin-bottom:10px;">',a+='<p style="margin:0 0 5px 0;font-weight:600;color:#e65100;">ğŸ’¡ Ù…Ø«Ø§Ù„ Ù…Ø­Ø§Ø³Ø¨Ù‡:</p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">â€¢ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ: <code>3xâ‚ + 5xâ‚‚</code> â†’ <strong>2 Ù…ØªØºÛŒØ± Ø§ØµÙ„ÛŒ</strong></p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">â€¢ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª â‰¤: Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ <code>xâ‚ƒ</code> (slack) â†’ <strong>+1 Ù…ØªØºÛŒØ±</strong></p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">â€¢ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª â‰¥: Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ <code>xâ‚„</code> (surplus) â†’ <strong>+1 Ù…ØªØºÛŒØ±</strong></p>',a+='<p style="margin:0;font-size:0.85rem;color:#2e7d32;font-weight:600;">âœ“ Ø¬Ù…Ø¹ Ú©Ù„: 2 + 1 + 1 = <strong>4 Ù…ØªØºÛŒØ±</strong></p>',a+="</div>",a+='<div style="background:#e8f5e9;padding:10px;border-radius:5px;">',a+='<p style="margin:0 0 5px 0;font-weight:600;color:#2e7d32;">âœï¸ Ù†Ø­ÙˆÙ‡ ÙˆØ±ÙˆØ¯:</p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">â€¢ <strong>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø§ØµÙ„ÛŒ:</strong> Ø¶Ø±ÛŒØ¨ ÙˆØ§Ù‚Ø¹ÛŒ (Ù…Ø«Ù„Ø§Ù‹ 3ØŒ 5)</p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">â€¢ <strong>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ slack/surplus:</strong> Ø¶Ø±ÛŒØ¨ <span style="background:#4caf50;color:white;padding:1px 5px;border-radius:3px;font-weight:700;">0</span> (Ú†ÙˆÙ† Ø¯Ø± ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ Ù†ÛŒØ³ØªÙ†Ø¯)</p>',a+='<p style="margin:3px 0 0 0;font-size:0.85rem;background:#fff9c4;padding:5px;border-radius:3px;">Ù…Ø«Ø§Ù„: <code style="background:#fff;padding:2px 5px;border-radius:2px;">c = [3, 5, <strong style="color:#f44336;">0</strong>, <strong style="color:#f44336;">0</strong>]</code> â† Ø¶Ø±Ø§ÛŒØ¨ xâ‚, xâ‚‚, xâ‚ƒ, xâ‚„</p>',a+="</div>",a+="</div>",a+="</div>",a+='<div class="matrix-input" style="grid-template-columns: repeat('+e+', 70px);direction:ltr;">';for(let t=0;t<e;t++)a+='<div style="text-align:center;">',a+=`<label style="font-size:0.9rem;color:#764ba2;font-weight:600;display:block;margin-bottom:5px;">x<sub>${t+1}</sub></label>`,a+=`<input type="text" id="manual-c${t}" value="0" class="num-input" style="text-align:center;">`,a+="</div>";a+="</div>",a+='<h5 class="mt-3">Ù…Ø§ØªØ±ÛŒØ³ A Ùˆ Ø¨Ø±Ø¯Ø§Ø± b:</h5>',a+='<div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:12px;padding:20px;margin:15px 0;color:white;box-shadow:0 4px 15px rgba(102,126,234,0.3);">',a+='<div style="display:flex;align-items:center;gap:10px;margin-bottom:15px;">',a+='<div style="background:rgba(255,255,255,0.2);padding:8px 12px;border-radius:8px;font-size:1.3rem;">ğŸ’¡</div>',a+='<h6 style="margin:0;font-size:1.1rem;font-weight:700;">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ÙˆØ±ÙˆØ¯ Ù…Ø³ØªÙ‚ÛŒÙ… ÙØ§Ø² Û²</h6>',a+="</div>",a+='<div style="background:rgba(255,255,255,0.15);border-radius:8px;padding:15px;margin-bottom:12px;">',a+='<p style="margin:0 0 8px 0;font-size:0.95rem;"><strong>âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ù‡ ÙØ±Ù… Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ <strong>AX = b</strong> ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.</p>',a+='<p style="margin:0;font-size:0.9rem;opacity:0.95;">Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ slack Ùˆ surplus Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ùˆ Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ ØªØ¹ÛŒÛŒÙ† Ù†ÙˆØ¹ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª (â‰¤, â‰¥, =) Ù†ÛŒØ³Øª.</p>',a+="</div>",a+='<div style="background:rgba(255,255,255,0.95);border-radius:8px;padding:15px;color:#333;line-height:1.8;">',a+='<p style="margin:0 0 12px 0;font-weight:600;color:#764ba2;">ğŸ“Œ Ù…Ø«Ø§Ù„: ØªØ¨Ø¯ÛŒÙ„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§</p>',a+='<div style="background:#e8f5e9;border-right:4px solid #4caf50;padding:10px;margin:8px 0;border-radius:5px;">',a+='<p style="margin:0 0 5px 0;font-size:0.9rem;"><strong style="color:#2e7d32;">âœ“ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª â‰¤ (Ú©ÙˆÚ†Ú©Ø±-Ù…Ø³Ø§ÙˆÛŒ):</strong></p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">Ø§ØµÙ„ÛŒ: <code>2xâ‚ + 3xâ‚‚ â‰¤ 10</code></p>',a+='<p style="margin:0;font-size:0.85rem;">ÙØ±Ù… Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯: <code>2xâ‚ + 3xâ‚‚ <span style="color:#4caf50;font-weight:700;">+ xâ‚ƒ</span> = 10</code> (xâ‚ƒ Ù…ØªØºÛŒØ± slack)</p>',a+="</div>",a+='<div style="background:#fff3e0;border-right:4px solid #ff9800;padding:10px;margin:8px 0;border-radius:5px;">',a+='<p style="margin:0 0 5px 0;font-size:0.9rem;"><strong style="color:#e65100;">âš¡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØª â‰¥ (Ø¨Ø²Ø±Ú¯ØªØ±-Ù…Ø³Ø§ÙˆÛŒ):</strong></p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">Ø§ØµÙ„ÛŒ: <code>xâ‚ + 2xâ‚‚ â‰¥ 6</code></p>',a+='<p style="margin:0;font-size:0.85rem;">ÙØ±Ù… Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯: <code>xâ‚ + 2xâ‚‚ <span style="color:#f44336;font-weight:700;">- xâ‚ƒ</span> = 6</code> (xâ‚ƒ Ù…ØªØºÛŒØ± surplus)</p>',a+="</div>",a+='<div style="background:#e3f2fd;border-right:4px solid #2196f3;padding:10px;margin:8px 0;border-radius:5px;">',a+='<p style="margin:0 0 5px 0;font-size:0.9rem;"><strong style="color:#1565c0;">â—† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª = (Ù…Ø³Ø§ÙˆÛŒ):</strong></p>',a+='<p style="margin:0 0 3px 0;font-size:0.85rem;">Ø§ØµÙ„ÛŒ: <code>3xâ‚ + xâ‚‚ = 9</code></p>',a+='<p style="margin:0;font-size:0.85rem;">ÙØ±Ù… Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯: <code>3xâ‚ + xâ‚‚ = 9</code> âš ï¸ <em style="color:#c62828;">(Ù‡ÛŒÚ† Ù…ØªØºÛŒØ± Ú©Ù…Ú©ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯!)</em></p>',a+="</div>",a+='<div style="background:#fce4ec;border-right:4px solid #e91e63;padding:12px;margin:12px 0 0 0;border-radius:5px;">',a+='<p style="margin:0 0 8px 0;font-weight:600;color:#c2185b;">ğŸ¯ Ù†Ú©Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ:</p>',a+='<ul style="margin:0;padding-right:20px;font-size:0.85rem;">',a+="<li>Ù‡Ù…Ù‡ Ù…ØªØºÛŒØ±Ù‡Ø§ Ø±Ø§ Ø¨Ø§ <strong>x</strong> Ù†Ø§Ù…â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯ (xâ‚, xâ‚‚, xâ‚ƒ, ...)</li>",a+='<li>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ slack: Ø¶Ø±ÛŒØ¨ <span style="background:#4caf50;color:white;padding:2px 6px;border-radius:3px;font-weight:700;">+1</span></li>',a+='<li>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ surplus: Ø¶Ø±ÛŒØ¨ <span style="background:#f44336;color:white;padding:2px 6px;border-radius:3px;font-weight:700;">-1</span></li>',a+="<li>Ù…Ø­Ø¯ÙˆØ¯ÛŒØª = Ø¨Ø¯ÙˆÙ† Ø³ØªÙˆÙ† Ø§Ø¶Ø§ÙÛŒ ÙˆØ§Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>",a+="</ul>",a+="</div>",a+="</div>",a+="</div>",a+='<div class="table-responsive" style="direction:ltr;">',a+='<table class="table table-bordered"><thead><tr>';for(let t=0;t<e;t++)a+=`<th>x${t+1}</th>`;a+="<th>b</th></tr></thead><tbody>";for(let n=0;n<t;n++){a+="<tr>";for(let t=0;t<e;t++)a+=`<td><input type="text" id="manual-a${n}_${t}" value="${n===t?"1":"0"}" class="num-input" style="width:60px;text-align:center;"></td>`;a+=`<td><input type="text" id="manual-b${n}" value="0" class="num-input" style="width:60px;text-align:center;"></td>`,a+="</tr>"}a+="</tbody></table></div>",a+='<h5 class="mt-3">Ø§Ù†ØªØ®Ø§Ø¨ Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡:</h5>',a+='<p class="text-muted">Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ (Ø¨Ø§ÛŒØ¯ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ <strong>'+t+"</strong> Ù…ØªØºÛŒØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆØ¯):</p>",a+='<div class="basis-selector">';for(let n=0;n<e;n++){a+=`<label><input type="checkbox" id="manual-basis${n}" value="${n}" ${n>=e-t?"checked":""}> <span>x${n+1}</span></label>`}a+="</div>",document.getElementById("manual-inputs").innerHTML=a,document.querySelectorAll(".num-input").forEach((e=>{e.addEventListener("input",(function(e){const t=this.selectionStart,a=this.value.length;this.value=persianToEnglish(this.value);const n=this.value.length;this.selectionStart=this.selectionEnd=t+(n-a)}))}))}function solveManual(){document.getElementById("manual-loading").classList.add("active"),document.getElementById("manual-output").innerHTML="",setTimeout((()=>{try{const e=parseInt(document.getElementById("manual-vars").value),t=parseInt(document.getElementById("manual-constraints").value),a=document.querySelector('input[name="manual-objtype"]:checked').value;let n=[];for(let t=0;t<e;t++)n.push(getNumValue(`manual-c${t}`));const l=[],o=[];for(let a=0;a<t;a++){const t=[];for(let n=0;n<e;n++)t.push(getNumValue(`manual-a${a}_${n}`));l.push(t),o.push(getNumValue(`manual-b${a}`))}const s=[];for(let t=0;t<e;t++)document.getElementById(`manual-basis${t}`).checked&&s.push(t);if(s.length!==t)return alert(`Ù„Ø·ÙØ§Ù‹ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ ${t} Ù…ØªØºÛŒØ± Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯!`),void document.getElementById("manual-loading").classList.remove("active");let d="";d+='<div class="step-box">',d+='<div class="step-title">ğŸ“‹ ÙØ±Ù…ÙˆÙ„â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø³Ø¦Ù„Ù‡</div>',d+='<div style="margin-top:15px;">',d+='<strong style="color:#764ba2;">Ù…Ø³Ø¦Ù„Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø®Ø·ÛŒ (ÙØ§Ø² Û² Ù…Ø³ØªÙ‚ÛŒÙ…):</strong>',d+='<div class="math-block">$$',d+="max"===a?"\\text{Maximize } Z = ":"\\text{Minimize } Z = ",d+=n.map(((e,t)=>(e>=0&&t>0?"+":"")+formatNum(e)+`x_{${t+1}}`)).join(""),d+="$$</div>",d+='<div class="math-block">$$\\text{Subject to: } AX = b$$',d+="$$A = "+mat2latex(l)+", \\quad b = "+vec2latex(o)+"$$",d+="$$x_j \\ge 0, \\quad \\forall j$$</div>",d+='<p style="margin-top:15px;"><strong>Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:</strong> $\\{'+s.map((e=>`x_{${e+1}}`)).join(", ")+"\\}$</p>",d+="</div></div>";const i=phaseTwo(l,o,"min"===a?n.map((e=>-e)):n,s,e,!1,[],[],a);document.getElementById("manual-output").innerHTML=d+i.html,MathJax.typesetPromise()}catch(e){document.getElementById("manual-output").innerHTML=`<div class="alert alert-danger">Ø®Ø·Ø§: ${e.message}<br><pre>${e.stack}</pre></div>`}document.getElementById("manual-loading").classList.remove("active")}),100)}function twoPhaseRevised(e,t,a,n,l="max"){let o="";o+='<div class="step-box">',o+='<div class="step-title">ğŸ“‹ ÙØ±Ù…ÙˆÙ„â€ŒØ¨Ù†Ø¯ÛŒ Ù…Ø³Ø¦Ù„Ù‡</div>',o+='<div style="margin-top:15px;">',o+='<strong style="color:#764ba2;">Ù…Ø³Ø¦Ù„Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø®Ø·ÛŒ Ø§ØµÙ„ÛŒ:</strong>',o+='<div class="math-block">$$',o+="max"===l?"\\text{Maximize } Z = ":"\\text{Minimize } Z = ",o+=a.map(((e,t)=>(e>=0&&t>0?"+":"")+formatNum(e)+`x_{${t+1}}`)).join(""),o+="$$</div>",o+='<div class="math-block">$$\\text{Subject to:}$$';for(let a=0;a<e.length;a++)o+="$$",o+=e[a].map(((e,t)=>(e>=0&&t>0?"+":"")+formatNum(e)+`x_{${t+1}}`)).join(""),o+=("<="===n[a]?" \\le ":">="===n[a]?" \\ge ":" = ")+formatNum(t[a]),o+="$$";o+="$$x_j \\ge 0, \\quad \\forall j$$</div>",o+="</div></div>";const s="min"===l?a.map((e=>-e)):a,d=e.length,i=e[0].length;let u=e.map((e=>[...e])),r=[...t],m=[],c=[],p=[],g=[],v=[];for(let e=0;e<i;e++)v.push(`x_${e+1}`);for(let e=0;e<d;e++)if("<="===n[e]){for(let t=0;t<d;t++)u[t].push(t===e?1:0);const t=u[0].length-1;m.push(t),v.push(`s_${m.length}`),g.push(t)}else if(">="===n[e]){for(let t=0;t<d;t++)u[t].push(t===e?-1:0);c.push(u[0].length-1),v.push(`s^-_${c.length}`);for(let t=0;t<d;t++)u[t].push(t===e?1:0);const t=u[0].length-1;p.push(t),v.push(`a_${p.length}`),g.push(t)}else{for(let t=0;t<d;t++)u[t].push(t===e?1:0);const t=u[0].length-1;p.push(t),v.push(`a_${p.length}`),g.push(t)}const x=u[0].length;if(0===p.length){o+='<div class="alert alert-info">Ù‡Ù…Ù‡ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ Ø§Ø² Ù†ÙˆØ¹ â‰¤ Ù‡Ø³ØªÙ†Ø¯. Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ ÙØ§Ø² Ø¯ÙˆÙ… Ø´Ø±ÙˆØ¹ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</div>';const e=new Array(x).fill(0);for(let t=0;t<i;t++)e[t]=s[t];return o+=phaseTwo(u,r,e,g,x,!1,[],v,l).html,o}o+='<div class="phase-header">ğŸ”µ Ø´Ø±ÙˆØ¹ ÙØ§Ø² Ø§ÙˆÙ„: Ø­Ø°Ù Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…ØµÙ†ÙˆØ¹ÛŒ</div>',o+='<div class="step-box">',o+='<div class="step-title"><span class="step-number">Û±</span>ØªØ¹Ø±ÛŒÙ Ù…Ø³Ø¦Ù„Ù‡ ÙØ§Ø² Ø§ÙˆÙ„</div>',o+='<div class="math-block">',o+=`$$\\min W = ${p.map(((e,t)=>`a_${t+1}`)).join(" + ")}$$`,o+=`$$\\Rightarrow \\max Z = ${p.map(((e,t)=>`-a_${t+1}`)).join(" ")}$$`,o+="</div>",o+='<p class="explanation-text">Ø¯Ø± ÙØ§Ø² Ø§ÙˆÙ„ØŒ Ø¶Ø±Ø§ÛŒØ¨ Ù‡Ù…Ù‡ Ù…ØªØºÛŒØ±Ù‡Ø§ ØµÙØ± Ø§Ø³Øª Ø¨Ù‡ Ø¬Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…ØµÙ†ÙˆØ¹ÛŒ Ú©Ù‡ Ø¶Ø±ÛŒØ¨ -1 Ø¯Ø§Ø±Ù†Ø¯ (Ø¨Ø±Ø§ÛŒ Ù…Ø§Ú©Ø²ÛŒÙ…Ù…â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¹Ø§Ø¯Ù„ Ù…ÛŒÙ†ÛŒÙ…Ù…â€ŒØ³Ø§Ø²ÛŒ).</p>',o+='<p class="explanation-text"><strong>Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ ÙØ§Ø² Û±:</strong> $\\{'+g.map((e=>v[e])).join(", ")+"\\}$</p>",o+="</div>";const y=new Array(x).fill(0);for(const e of p)y[e]=-1;const h=phaseTwo(u,r,y,g,x,!0,p,v,"max");if(o+=h.html,!h.optimal)return o+='<div class="alert alert-warning">ÙØ§Ø² Ø§ÙˆÙ„ Ø¨Ù‡ Ø¬ÙˆØ§Ø¨ Ø¨Ù‡ÛŒÙ†Ù‡ Ù†Ø±Ø³ÛŒØ¯.</div>',o;const b=h.finalBasis,$=b.map((e=>getCol(u,e))),f=$[0].map(((e,t)=>$.map((e=>e[t])))),E=math.inv(f),I=math.multiply(E,r),B=b.map((e=>y[e])),k=-math.dot(B,I);if(k>1e-9)return o+='<div class="result-box infeasible-box">',o+="<h3>âš ï¸ Ù…Ø³Ø¦Ù„Ù‡ Ù†Ø´Ø¯Ù†ÛŒ Ø§Ø³Øª!</h3>",o+=`<p>Ù…Ù‚Ø¯Ø§Ø± W = ${formatNum(k)} > 0</p>`,o+="<p>Ø¬ÙˆØ§Ø¨ Ø´Ø¯Ù†ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>",o+="</div>",o;o+='<div class="math-block success">',o+='<p style="margin:0;font-size:1.2rem;font-weight:600;">âœ… ÙØ§Ø² Ø§ÙˆÙ„ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª: $W = 0$</p>',o+="</div>",o+='<div class="phase-header">ğŸŸ¢ Ø´Ø±ÙˆØ¹ ÙØ§Ø² Ø¯ÙˆÙ…: Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ</div>';const _=u.map((e=>e.filter(((e,t)=>!p.includes(t))))),w=[];let z=0;const j={};for(let e=0;e<x;e++)p.includes(e)||(j[e]=z++,e<i?w.push(s[e]):w.push(0));const T=b.filter((e=>!p.includes(e))).map((e=>j[e])),N=v.filter(((e,t)=>!p.includes(t)));o+='<div class="step-box">',o+='<div class="step-title"><span class="step-number">Û±</span>Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø¶Ø±Ø§ÛŒØ¨ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù Ø§ØµÙ„ÛŒ</div>',o+='<div class="math-block">',o+=`$$c^T = ${vec2latex([w])}^T$$`,o+="</div>",o+='<p class="explanation-text"><strong>Ù¾Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ ÙØ§Ø² Û²:</strong> $\\{'+T.map((e=>N[e])).join(", ")+"\\}$</p>",o+="</div>";return o+=phaseTwo(_,r,w,T,w.length,!1,[],N,l).html,o}function phaseTwo(e,t,a,n,l,o=!1,s=[],d=[],i="max"){let u="";const r=e.length,m=e[0].length;if(0===d.length)for(let e=0;e<m;e++)d.push(`x_{${e+1}}`);let c=[...n],p=0;let g=!1;for(;p<50;){p++,u+=`<div class="step-box"><div class="step-title" style="background:#764ba2;color:white;padding:10px;border-radius:5px;">ØªÚ©Ø±Ø§Ø± ${p}</div>`,u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û±</span>Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù…Ø§ØªØ±ÛŒØ³ Ù¾Ø§ÛŒÙ‡ (B)</div>',u+='<p class="explanation-text"><strong>Ù¾Ø§ÛŒÙ‡ ÙØ¹Ù„ÛŒ:</strong> $\\{'+c.map((e=>d[e])).join(", ")+"\\}$</p>";const n=c.map((t=>getCol(e,t))),l=n[0].map(((e,t)=>n.map((e=>e[t]))));u+='<div class="math-block">$$B = '+mat2latex(l)+"$$</div>",u+="</div>",u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û²</span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹Ú©ÙˆØ³ Ù¾Ø§ÛŒÙ‡ ($B^{-1}$)</div>';const s=math.inv(l);u+='<div class="math-block highlight">$$B^{-1} = '+mat2latex(s)+"$$</div>",u+="</div>",u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û³</span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡ ($X_B = B^{-1}b$)</div>';const i=math.multiply(s,t);u+='<div class="math-block highlight">',u+=`$$X_B = B^{-1} \\cdot b = ${mat2latex(s)} \\times ${vec2latex(t)} = ${vec2latex(i)}$$`,u+="</div></div>";const v=c.map((e=>a[e])),x=math.dot(v,i);u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û´</span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…Ù‚Ø¯Ø§Ø± ÙØ¹Ù„ÛŒ ØªØ§Ø¨Ø¹ Ù‡Ø¯Ù</div>',u+='<div class="math-block">',u+=`$$C_B^T = ${vec2latex([v])}^T$$`,u+=`$$${o?"W":"Z"} = C_B^T \\cdot X_B = ${formatNum(x)}$$`,u+="</div></div>",u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Ûµ</span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØªÙ‡ ($\\bar{C}_j$)</div>';const y=[];for(let e=0;e<m;e++)c.includes(e)||y.push(e);const h=[];u+='<div style="direction:ltr;text-align:left;margin:10px 0;">';for(const t of y){const n=getCol(e,t),l=math.multiply(math.transpose(s),c.map((e=>a[e]))),o=a[t]-math.dot(l,n);h.push(o),u+=`<p style="margin:5px 0;">$\\bar{C}_{${d[t]}} = ${formatNum(a[t])} - ${vec2latex([l])}^T \\cdot ${vec2latex(n)} = ${formatNum(o)}$</p>`}u+="</div>";const b=h.map(((e,t)=>e>1e-9?t:-1)).filter((e=>e>=0));if(0===b.length){u+='<div class="math-block success">',u+='<p style="margin:0;font-size:1.1rem;font-weight:600;"><strong>âœ“ Ù‡Ù…Ù‡</strong> $\\bar{C}_j \\le 0$ <strong>â†’ Ø¬ÙˆØ§Ø¨ Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø³Øª!</strong></p>',u+="</div>",u+="</div></div>",g=!0;break}let $=b[0];for(const e of b)h[e]>h[$]&&($=e);const f=y[$];u+='<div class="math-block warning">',u+='<p style="margin:0 0 8px 0;font-size:1.05rem;"><strong>$\\exists \\bar{C}_j > 0$ â†’ Ø§Ø¯Ø§Ù…Ù‡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</strong></p>',u+=`<p style="margin:0 0 8px 0;"><strong>Ø¨ÛŒØ´ØªØ±ÛŒÙ†:</strong> $\\bar{C}_{${d[f]}} = ${formatNum(h[$])}$</p>`,u+=`<div style="border:2px solid #27ae60;background-color:#d5f4e6;padding:10px;border-radius:5px;margin:8px 0;display:inline-block;"><strong>Ù…ØªØºÛŒØ± ÙˆØ§Ø±Ø¯Ø´ÙˆÙ†Ø¯Ù‡:</strong> $${d[f]}$</div>`,u+="</div></div>",u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û¶</span>Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¨Ø±Ø¯Ø§Ø± Ø¬Ù‡Øª ($d = B^{-1} P_j$)</div>';const E=getCol(e,f),I=math.multiply(s,E);u+='<div class="math-block">',u+=`$$P_{${d[f]}} = ${vec2latex(E)}$$`,u+=`<p style="margin:8px 0 0 0;font-size:0.9rem;color:#666;">(Ø³ØªÙˆÙ† ${f+1} Ø§Ø² $A$)</p>`,u+="</div>",u+='<div class="math-block highlight">',u+=`$$d = B^{-1} \\cdot P_{${d[f]}} = ${mat2latex(s)} \\times ${vec2latex(E)} = ${vec2latex(I)}$$`,u+="</div></div>",u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û·</span>Ø¢Ø²Ù…ÙˆÙ† Ù†Ø³Ø¨Øª (Ratio Test)</div>',u+='<div class="math-block">$$\\theta = \\min\\left\\{\\frac{X_{B_i}}{d_i} \\; | \\; d_i > 0\\right\\}$$</div>';const B=[];for(let e=0;e<r;e++)I[e]>1e-9&&B.push({idx:e,bVar:c[e],xb:i[e],di:I[e],ratio:i[e]/I[e]});if(0===B.length){u+='<div class="math-block" style="background:#fed7d7;border-color:#c53030;">',u+='<p style="margin:0;font-size:1.1rem;font-weight:600;color:#c53030;"><strong>âš  Ù‡Ù…Ù‡</strong> $d_i \\le 0$ <strong>â†’ Ù…Ø³Ø¦Ù„Ù‡ Ù†Ø§Ù…Ø­Ø¯ÙˆØ¯!</strong></p>',u+="</div></div></div>";break}let k=B[0];for(const e of B)e.ratio<k.ratio-1e-9&&(k=e);u+='<table class="ratio-table"><thead><tr><th>Ù…ØªØºÛŒØ± Ù¾Ø§ÛŒÙ‡</th><th>$X_{B_i}$</th><th>$d_i$</th><th>Ù†Ø³Ø¨Øª</th></tr></thead><tbody>';for(let e=0;e<r;e++){const t=I[e]>1e-9;u+=`<tr class="${B.some((t=>t.idx===e&&t===k))?"selected":t?"":"invalid"}">`,u+=`<td>$${d[c[e]]}$</td>`,u+=`<td>$${formatNum(i[e])}$</td>`,u+=`<td>$${formatNum(I[e])}$</td>`,u+=t?`<td>$\\frac{${formatNum(i[e])}}{${formatNum(I[e])}} = ${formatNum(i[e]/I[e])}$</td>`:"<td>â€”</td>",u+="</tr>"}u+="</tbody></table>",u+='<div class="math-block success">',u+=`$$\\theta^* = ${formatNum(k.ratio)}$$`,u+=`<div style="border:2px solid #e74c3c;background-color:#ffe6e6;padding:10px;border-radius:5px;margin:8px 0;display:inline-block;"><strong>Ù…ØªØºÛŒØ± Ø®Ø§Ø±Ø¬â€ŒØ´ÙˆÙ†Ø¯Ù‡:</strong> $${d[k.bVar]}$</div>`,u+="</div></div>";const _=k.idx,w=c[_];c[_]=f,u+='<div class="step-box">',u+='<div class="step-title"><span class="step-number">Û¸</span>Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾Ø§ÛŒÙ‡</div>',u+='<div style="display:flex;justify-content:center;align-items:center;gap:20px;margin:15px 0;">',u+=`<div style="border:2px solid #e74c3c;background-color:#ffe6e6;padding:12px 20px;border-radius:8px;"><strong>Ø®Ø±ÙˆØ¬:</strong> <span class="leaving-var" style="font-size:1.2rem;margin-right:8px;">$${d[w]}$</span></div>`,u+='<div style="font-size:1.5rem;">$\\longleftrightarrow$</div>',u+=`<div style="border:2px solid #27ae60;background-color:#d5f4e6;padding:12px 20px;border-radius:8px;"><strong>ÙˆØ±ÙˆØ¯:</strong> <span class="entering-var" style="font-size:1.2rem;margin-right:8px;">$${d[f]}$</span></div>`,u+="</div>",u+='<p class="explanation-text"><strong>Ù¾Ø§ÛŒÙ‡ Ø¬Ø¯ÛŒØ¯:</strong> $\\{'+c.map((e=>d[e])).join(", ")+"\\}$</p>",u+="</div></div>"}if(g){const n=c.map((t=>getCol(e,t))),l=n[0].map(((e,t)=>n.map((e=>e[t])))),s=math.inv(l),m=math.multiply(s,t),g=c.map((e=>a[e])),v=math.dot(g,m);u+='<div class="result-box">',u+=`<h3>${o?"âœ… ÙØ§Ø² Ø§ÙˆÙ„ Ú©Ø§Ù…Ù„ Ø´Ø¯":"ğŸ‰ Ø¬ÙˆØ§Ø¨ Ø¨Ù‡ÛŒÙ†Ù‡"}</h3>`;u+=`<div style="font-size:1.8rem;font-weight:bold;margin:15px 0;">$${o?"W":"Z"}^* = ${formatNum("min"!==i||o?v:-v)}$</div>`,u+='<div style="background:rgba(255,255,255,0.3);padding:15px;border-radius:8px;margin:15px 0;">';for(let e=0;e<r;e++)u+=`<p style="margin:5px 0;font-size:1.1rem;">$${d[c[e]]} = ${formatNum(m[e])}$</p>`;u+="</div>",u+=`<p class="explanation-text text-center mt-3"><strong>ØªØ¹Ø¯Ø§Ø¯ ØªÚ©Ø±Ø§Ø±Ù‡Ø§:</strong> ${p} | <strong>Ù¾Ø§ÛŒÙ‡ Ù†Ù‡Ø§ÛŒÛŒ:</strong> $\\{${c.map((e=>d[e])).join(", ")}\\}$</p>`,u+="</div>"}else u+='<div class="alert alert-warning">Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù¾Ø³ Ø§Ø² 50 ØªÚ©Ø±Ø§Ø± Ù…ØªÙˆÙ‚Ù Ø´Ø¯.</div>';return{html:u,finalBasis:c,optimal:g}}function loadAutoExample1(){document.getElementById("auto-vars").value=2,document.getElementById("auto-constraints").value=2,generateAutoInputs(),setTimeout((()=>{document.querySelector('input[name="auto-objtype"][value="max"]').checked=!0,document.getElementById("auto-c0").value=3,document.getElementById("auto-c1").value=5,document.getElementById("auto-a0_0").value=1,document.getElementById("auto-a0_1").value=0,document.getElementById("auto-type0").value=">=",document.getElementById("auto-b0").value=4,document.getElementById("auto-a1_0").value=0,document.getElementById("auto-a1_1").value=2,document.getElementById("auto-type1").value=">=",document.getElementById("auto-b1").value=12}),100)}function loadAutoExample2(){document.getElementById("auto-vars").value=2,document.getElementById("auto-constraints").value=2,generateAutoInputs(),setTimeout((()=>{document.querySelector('input[name="auto-objtype"][value="max"]').checked=!0,document.getElementById("auto-c0").value=3,document.getElementById("auto-c1").value=2,document.getElementById("auto-a0_0").value=2,document.getElementById("auto-a0_1").value=1,document.getElementById("auto-type0").value="<=",document.getElementById("auto-b0").value=18,document.getElementById("auto-a1_0").value=1,document.getElementById("auto-a1_1").value=1,document.getElementById("auto-type1").value="<=",document.getElementById("auto-b1").value=10}),100)}function loadAutoExample3(){document.getElementById("auto-vars").value=2,document.getElementById("auto-constraints").value=3,generateAutoInputs(),setTimeout((()=>{document.querySelector('input[name="auto-objtype"][value="max"]').checked=!0,document.getElementById("auto-c0").value=2,document.getElementById("auto-c1").value=3,document.getElementById("auto-a0_0").value=1,document.getElementById("auto-a0_1").value=1,document.getElementById("auto-type0").value="<=",document.getElementById("auto-b0").value=10,document.getElementById("auto-a1_0").value=1,document.getElementById("auto-a1_1").value=0,document.getElementById("auto-type1").value="=",document.getElementById("auto-b1").value=3,document.getElementById("auto-a2_0").value=0,document.getElementById("auto-a2_1").value=1,document.getElementById("auto-type2").value=">=",document.getElementById("auto-b2").value=2}),100)}function loadManualExample1(){document.getElementById("manual-vars").value=4,document.getElementById("manual-constraints").value=2,generateManualInputs(),setTimeout((()=>{document.querySelector('input[name="manual-objtype"][value="max"]').checked=!0,document.getElementById("manual-c0").value=3,document.getElementById("manual-c1").value=2,document.getElementById("manual-c2").value=0,document.getElementById("manual-c3").value=0,document.getElementById("manual-a0_0").value=2,document.getElementById("manual-a0_1").value=1,document.getElementById("manual-a0_2").value=1,document.getElementById("manual-a0_3").value=0,document.getElementById("manual-b0").value=18,document.getElementById("manual-a1_0").value=1,document.getElementById("manual-a1_1").value=1,document.getElementById("manual-a1_2").value=0,document.getElementById("manual-a1_3").value=1,document.getElementById("manual-b1").value=10,document.getElementById("manual-basis0").checked=!1,document.getElementById("manual-basis1").checked=!1,document.getElementById("manual-basis2").checked=!0,document.getElementById("manual-basis3").checked=!0}),100)}function loadManualExample2(){document.getElementById("manual-vars").value=5,document.getElementById("manual-constraints").value=2,generateManualInputs(),setTimeout((()=>{document.querySelector('input[name="manual-objtype"][value="max"]').checked=!0,document.getElementById("manual-c0").value=5,document.getElementById("manual-c1").value=4,document.getElementById("manual-c2").value=0,document.getElementById("manual-c3").value=0,document.getElementById("manual-c4").value=0,document.getElementById("manual-a0_0").value=6,document.getElementById("manual-a0_1").value=4,document.getElementById("manual-a0_2").value=1,document.getElementById("manual-a0_3").value=0,document.getElementById("manual-a0_4").value=0,document.getElementById("manual-b0").value=24,document.getElementById("manual-a1_0").value=1,document.getElementById("manual-a1_1").value=2,document.getElementById("manual-a1_2").value=0,document.getElementById("manual-a1_3").value=1,document.getElementById("manual-a1_4").value=0,document.getElementById("manual-b1").value=6,document.getElementById("manual-basis0").checked=!1,document.getElementById("manual-basis1").checked=!1,document.getElementById("manual-basis2").checked=!0,document.getElementById("manual-basis3").checked=!0,document.getElementById("manual-basis4").checked=!1}),100)}window.onload=()=>{generateAutoInputs(),generateManualInputs()}</script>
</body>
</html>
